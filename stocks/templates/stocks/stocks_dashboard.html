{% extends 'stocks/stocks_base.html' %} 
{% load static %} 
{% load custom_filters %}
{% load crispy_forms_tags %}
{% block title%}Travel Search{% endblock %}
{% block header %} <h4>Travel Deals</h4>{% endblock %} 

{%block content %}

  <div class="container bg-light mt-4">

    <p> Stocks Dashboard 123 </p>
    <div class="row mb-4">
        <div class="col">
            <input type="text" class="form-control" placeholder="Search stocks...">
        </div>
        <div class="col-auto">
            <a href="{% url 'stocks:add_stock' %}" class="btn btn-primary">
                <i class="bi bi-plus-lg"></i> Add Stock
            </a>
        </div>
    </div>

    <div class="row">
        <div class="col">
            <table class="table table-striped table-hover">
                <thead>
                    <tr>
                        <th scope="col">#</th>
                        <th scope="col">Symbol</th>
                        <th scope="col">Quantity</th>
                        <th scope="col">Current Price</th>
                        <th scope="col">Purchase Price</th>
                        <th scope="col">52 Week Low</th>
                        <th scope="col">52 Week Highth</th>
                        <th scope="col">marketCap</th>
                        <th scope="col">Divident Rate</th>
                        <th scope="col">Name</th>

                    </tr>
                </thead>
                <tbody>
                {% for stock in stocks %}
                    <tr>
                        <th scope="row">{{ forloop.counter }}</th>
                        <td>{{ stock.symbol }}</td>
                        <td>{{ stock.quantity }}</td>
                        <td>{{ stock.currentPrice|nan_to_blank }}</td>
                        <td>{{ stock.purchase_price }}</td>
                        <td>{{ stock.fiftyTwoWeekLow|nan_to_blank }}</td>
                        <td>{{ stock.fiftyTwoWeekHigh|nan_to_blank }}</td>
                        <td>{{ stock.marketCap|millions|nan_to_blank }}</td>
                        <td>{{ stock.dividendRate|nan_to_blank }}</td>
                        <td>{{ stock.shortName }}</td>
                    </tr>
                    {% empty %}
                    <tr>
                        <td colspan="9" class="text-center">No stocks found</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
    <div class="row justify-content-center align-items-center g-2">
    </div>
    
    </div>
        
  </div>  
{% endblock %}


{% block script_block %}

<script>
  $(document).ready(function() {
 
    console.log("Stocks App : In Document Ready Function");

  });

</script>
{% endblock %}

